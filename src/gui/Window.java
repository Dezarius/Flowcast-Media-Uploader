/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package gui;

import ftp.Ftp;
import ftp.Server;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.ByteArrayInputStream;
import javax.swing.*;

import javax.swing.filechooser.*;
import java.io.File;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.Arrays;
import java.util.Calendar;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.swing.event.DocumentEvent;
import javax.swing.event.DocumentListener;
import javax.xml.bind.DatatypeConverter;

/**
 *
 * @author janabelmann
 */
public class Window implements ActionListener, DocumentListener {

    private Settings settings;
    private Ftp ftp;
    private JFrame window;
    private Server server;
    private Calendar calendar;
    private String hex_redLight = "89504E470D0A1A0A0000000D494844520000001E0000001E08060000003B30AEA2000000017352474200AECE1CE9000000097048597300000B1300000B1301009A9C180000015969545874584D4C3A636F6D2E61646F62652E786D7000000000003C783A786D706D65746120786D6C6E733A783D2261646F62653A6E733A6D6574612F2220783A786D70746B3D22584D5020436F726520352E342E30223E0A2020203C7264663A52444620786D6C6E733A7264663D22687474703A2F2F7777772E77332E6F72672F313939392F30322F32322D7264662D73796E7461782D6E7323223E0A2020202020203C7264663A4465736372697074696F6E207264663A61626F75743D22220A202020202020202020202020786D6C6E733A746966663D22687474703A2F2F6E732E61646F62652E636F6D2F746966662F312E302F223E0A2020202020202020203C746966663A4F7269656E746174696F6E3E313C2F746966663A4F7269656E746174696F6E3E0A2020202020203C2F7264663A4465736372697074696F6E3E0A2020203C2F7264663A5244463E0A3C2F783A786D706D6574613E0A4CC227590000096B49444154480D8D566B7094E5157EBEDBEE6637D7CD86245C170888114D5210954BA51083C3E5476D2376C6D629E2607FE854E9E8681D0AE2A57564EA1FABD84EC74E6B75B8D529452EA353D4180C49081B4224CA25014392DD4D369BDD24BBDFB5CFBB6419F0C2F4CC9CEFF6BEEF79CE73CE79CFFB49F81E711C479124C9BA6678EEDEBD7B174F9932A5263F3FBF4255D5128E4B966946471289737D7D7DA117B66C696C0E854E67D74CD8B0F9EE64BFDDE82E8905D9099B376F5EDAD4D4F4371A1E302D8B43DF2FFDFDFD83ADADCDEF6DDDBAB536BB9EB3653E4BD9F7ECFD9B1F04A82022BC0C1C3E74E8B7B75555FDAAACACCC6D1806BACF9F47F7D9B376EF850B480C0D8173915B5484C9C1208215157270F66C78DC6E44A351EB54FBA9BFAE58B9621BEDF40A70DA14ACBF93B90015DE09A96C6D6E6EE4BB339E4A390D1F7F6CBCFAF4D3E64380753F606FA23E417D92FA28557C7B9063BF7FE2D7E6D10F3F3412C9A458EA84DADA42AB57AF5E280CF25590BC4AF4EA0307B2399DD7D6D6B6B7BABABAF2DCB973E691DDBB117AE6198513A55B7EF173CC5BFE23940583F0E5E70B7B184B2410BE78115D0D9FE2D49FFF028318F3B76EB557AD5F6FDF346F9ED6D1D1D1B371E3C69F305DADC4B89EB900CD58012635363636F0DD696D69D19FDFB8D12233E777B36638FF7DFB6D67F0FC79C71A1E761CC12891B8A2C98463C7E34EACBBDB6978F75D677B4D9523D66C79F041FBF3C6C6B4B0D5DCDCDC4EFB4181C1D70C965A5F5F9F650A56ED730B162C5872AABDDDFA60E79B8A79BC51CEE5E4555BB662D1BDF7425614186408872590CD96889924A1C0EBC55DB52B91234BD8BFFE01D8278E4B87FEE4689ACB65D4D4D4DCBA7FFFFEE7D7AD5BF790D808BB76ED5294D3A74F4BDBB66D73188E156BD7AEFDA34D8F8EBCF79EADB79F54D28DC7B1F0914770E7BAB5902D13C66014AAAE434EA7AF53299582311C83A31BF017FB61E5E4A0E7DF07E02D2D91FA934994CDAE900B0B0BABA8273FF9E4933304863A51C112BDD93079F26457D3A79F19C98E764D8EC7318964E6CEA9803232022736048DCC98A4890A115485380C1FA0F16E728EACB9503133880B1C198E84317EA6530935371BCB6A6BB5A54B966CE4E783C44CAB7C1072DBA44993564522515CEA6897B5B151584D2D98C9011F3D96C303506C1BCC09A34A40A1D708B743666B8939B6AA2267248120C73B4F7640993A0D973B4E297D9595280E0496DF7FDF7D0B77EDDBF7590678C72BAF2CCECDCB0BF45EEC811909CB72320151B301AAD6730172490032739711993BEE3A60D215F926A82C1CE0A37AE13C8A79171A8F0F438A0D49BD3D3DCE8C8A0ADFF2DADA1F5E050E9496D6282C9CE148C4723BB6AC87C3F073519E578176A21512F326151743B2D841950960012E50C4C57620D9162459813D3C0CADAD15A228FD1E17E25F5F84BBAA062391886DCF9AA530CFD51C5204631FFBEEF494281086D8AD2A18BD741EBE3C2FDC64AA0DF643A221E9E64ACEF4912D575C1B6E9160B2CD38313E06A9AB0B6A6F37DCC129F08D304D177AA189DD303E8E71AAA669415A28CA00CBB2EC17C0B06CB85D6EC82306B4B202A8AACC3097421A1E04BA3A81B27220975C342ECB865B809A26901C05FAFB2045235002A55068CF95E3A19F7148AA2AC9DC82A9B131510B228B3E01ACE87A5A4EA7D2E4AF42A3E10C2932874B83E47601DE1C4E23B3A108309E043C1EAE9AE83926C39FA6D3340A11EEFC02CE19BF921683EF5CE966A4244D439A5B51D775F12913EA7432393AA21B3A14970B1E367D4C2D816EA4E1B0E18B6FE0DDF1B8338B19862BE186384728A2F78B08787D70B89540A68AA805D3869EA09394BCE28033EEF6401C340C373D842E0E85F1E4C848BFCEA6609385D75F0CD7FC6A240686611150F532F4642D9CC830F779196EE65A84DC4715CFEC5AF07A388711A2A36A8E1B161D4D7E3D0075F122F84A4AE0D061B26595C72F13339101BEDCDF7F26C156A85BB6ACB2F917D5FC000C2A5264E01411B088A1156C04380D7E4B0994195339A780CF7E3752AC1561A3E88EBBE06614D396258D311D9148A48B9F9302180D0D0DAD43434349DD34A434B7E2B485B7831D1903E118F47C329A9207A990BD895E3B1EB2CB30CDB26588DD5E38CC9A54A0314DB9D00BBC88C4C730441BD3EEB88371959DB461C883D1A8190A855AF8D9CA00B7B6B686C2E17033B385CBD141BB2818C49C17B621F4C51944D39C52C85D5DC18A2EE4B39580ADA7609B06D584CD5A8049375953985D4AB67EC44C0DA1503BA63FF51B94CC999BB1C9510C0E0D9D3C74E8900046F6384C7A3C9EDCA953A7AE4EA752725E418155B960817C2E16C5C03BFB50B178215C736E8233730E241A96DC8239C32AF25FC888D0517BEE5CC84C53BA2F860F5FFB0786EF5989BA273723924CDA5D5F9D550C16DCB1A6A6D7BFE8ECFC80B876F65747909DF5D8E38FBF31BFF2E6BA5472D4ACABAB53F25445FAD78B2FA2FC9D7F62CDAB4FC153BB06983E178E447F5928574E071694C32ABEF4258CA34770F88997F1D59AD5B8EFA597606A2EE7E0E1C396CBE351BF3C7BB671C78E1D8F10A7937B39DB05F80A88B0AF7DF6D9675F2F2F2D9DEA5896C1DF16B5C0E7951ADF7F1F78F9712C7CE06728FBE906C89535AC66F601B123933CB9BE0821B2EF6DB4BCF977A49EFB0396D6D763DCB69D03FF3960F207518BC66283DBB76F7F8CB37753D96D2676E4C45DB0CE2D2929D9B069D3A617FC858579A6AE9BF7D4D5C9336706E5C1DECB881FFF1CBEAF4EB0B6DC700598738A11EDC3280B2939BB0A79772E41C9B469F8BAB7D73E72F830A11D75647434BD67CF9E6D9D9D9D6F70FA3055B89BF901E33D2322ECEC8452607A30F8CBF5F5F59B037EFF24EE715455579BB75655C9054545926C1892941881ACB3A828B6C6E6929707DBE57212FC053A7DAAC36E6B6D5173B8CF633C9A0E1C3CF85A477BFB4EDA1EC81CA957BA7A063D63207BC9C45F92C489B6EEE1871F7EB4BCBC7C91A85E95C7E18C1933ECF2E9D39DC24040D2B84F8598EC78F1C141A7EFD225A9A7BB5BD6D99D44B71B08874FBEB573E75B9CB28F36C3041511BD2A82F6B764029CE58A9A65CBEEFEF12DF32B57F17FF926168122CE5C37FBAEF8FF1262B33FEBFCE5B1582E2C193B954E9FFBB2ABEBC8471F7DB48FC32DB495F826A858F79DC0624088F811DCBD7B77091F6F5B70FBED8B2A66CDAAF6FA7C3369C8AF2A8A573868D9F618A9C478F27453DA8F1D3BD6C4F9A1E5CB970F1C3D7A345348C2D637E586C0D74C16F4C471269C6097803F273FDF47D6D2682CC6F31031EA00354C8D53B9BF6E2CFF2FF0B556C41AE14876ADC89D00BA2E877CBFA1FC0FAA5776E8A6DB6A9D0000000049454E44AE426082";
    private String hex_greenLight = "89504E470D0A1A0A0000000D494844520000001E0000001E08060000003B30AEA2000000017352474200AECE1CE9000000097048597300000B1300000B1301009A9C180000015969545874584D4C3A636F6D2E61646F62652E786D7000000000003C783A786D706D65746120786D6C6E733A783D2261646F62653A6E733A6D6574612F2220783A786D70746B3D22584D5020436F726520352E342E30223E0A2020203C7264663A52444620786D6C6E733A7264663D22687474703A2F2F7777772E77332E6F72672F313939392F30322F32322D7264662D73796E7461782D6E7323223E0A2020202020203C7264663A4465736372697074696F6E207264663A61626F75743D22220A202020202020202020202020786D6C6E733A746966663D22687474703A2F2F6E732E61646F62652E636F6D2F746966662F312E302F223E0A2020202020202020203C746966663A4F7269656E746174696F6E3E313C2F746966663A4F7269656E746174696F6E3E0A2020202020203C2F7264663A4465736372697074696F6E3E0A2020203C2F7264663A5244463E0A3C2F783A786D706D6574613E0A4CC227590000098649444154480D8D577B7054D519FFDDC7DEDD64B39B4DB22421C1BC0489400388A156C5528A384389A3526C9DFEA31247AB23ADCDB433D0A9856AA7A3334C5B47C7EA743A237F749480A3B536C1115126268D21C086248A9001F2CE66DFEFBBF7DE73FA9D9B2C45AB4E4FE6EC3DAFEFFB7DEF7322E16B1AE75C9124C9BA66FB86A3478FDE5A5B5BBBDEEBF52E57557509ED4BA665869289E4D8CCCC4CE0E9679FEE0D0C04460A348B3C18CD7961ED9BBE9220281CE8E8E8B8BDBFBFFF35623C6759166D7D7D9B9D9D0D0F0E0EBEBE7FFFFEAD057A3A2DD3582ACC0BDF2F2F0850A18890D27FECD8B15FB7B4B4FCB4BABADA6918062E5DBA84B1CB17D9F8E4254413115B0D5F4919EA6AEBD1D4B85C6E6A6C82D3E9442814B2CE9D3BF7B72D5BB61C203E53029C780AADBF5273012AA4136DD5C0E0402FCD79369BE5277B3E32F63FB7D76CDE090B5BC1FC3F02FB767B09BBA5BD942D7D004CACD5DD036BEFB31DE6F113EF1BC9644A90F240E04C60FBF6ED370B8634154A5E55F4EA80360A3E6D3E73E6CCD175EBD6AD1A1B1B33DFEE3A82C3FDCF2BFD4644DA73D343F8CE9AEFA2AEA6011EB7171251A7D2494CCC8EE393918FF1D7C1BFA09E83FFB8F577EC9EEDBB58F3CA66C7F0F0F095F6F6F69DE4AE41C2F8A2E602544845ADB2B7B7B787E67C70F054FEE7BF79CCBAE51137DFFAD42AFE46F7213E19BCC4334682EB3CCD75B6D8699C35137C3A3CCEDFFAE00DBEE3971BF9CDEDE08FEF7D90F5F5F5EA82D7C0C0C010F16E1000345DC0DAB56B57011414B52FE8BACE034301F3A9DF3E66DDDDB191B73C01DEF9C1211ED7E779D288F050668ACFA727F97C66B1D358AC258DB0DDFFF97127DFF83327DFF18B0DFC897D0FB253A480699AFC9D77DE3944B8B6850F1F3EAC28232323D2810307389963CB8E1D3BFEC81857DEEE3ECCAEA446957F474FE0FE5B1EC7F63BDAC0650BC95C184C36614906393BBFD0A53C0CAE23958BC3E406FCFE0A187917FE7EFE081A3DB5522C98447D4D93ECF3F9D6523F7BF2E4C9CF0818C2E62282A5B6B6B6876B6A6AB4B3E74E1B97A39FAA092B865C19D0BCF20618721AB1FC2C7439890C8F518F5EED697B1C83AE241133E6A02381152BAEC7D22A2062043199B8A00C9E1D30962C5982DB6EBFAD9DB09C22C20B51DC52595979D7FCFC3CCE5F1A96753983A07516EB1B00CB95458A859046040224CD2234A7F135DF340BD31EADD199148D2D2D8D950D5ECCF201184A0E17264695E9E969F82BFC9BEFBBFF3E3BCA6DE0E70F3E7FABA7C4E39F981C07F94ACEB214B4D22C3C150AA2984082CDDBA049629A14805604492BBAF8A531AD25AD305921629F0DF371387D3A4ACB6512248E0C8B4B1353E3DCE3F1BAB76EDE7A07690D55FC54F9ABD6CB8A82702C64491A9793A4A1D757056F4909493D8A6AA312A572392C66916F84AC2246EC38A12FE58FF8E30C8AA490E0314C5B237097D4C22CB3109B9C81A4B520129B670DD7352AE4E77544A4086037D5DD3A3D97432E9F81EA5091E5F3287717C3EDF2C1525218CF0FA3565901A75C4C3805C0C2770158CC742B8B69FD22F24A8468CB912B4E90F12788A7829C9143269B81C3E168A0A36536B02CCBE5D95CD6965AD3348ADA0434C732124B854B2DA2804962267F115EA5D206572495F4950BBA8271133ACB20610591458C684AC9B719689A9378A5C84AAA04AA985405451E7B6D65E947C9E7F332E52F14324091EA16A14E5D21D3A950650D9A5444C7A84AB128744E56919CF6BE303323138B743278CE16C429BBC1A41CD11A02D0A62B7216C3A13A4038D0F379611CDBD47A2A954A187983363578351F5C72352CC382020DAA429DC00598AD2909242ABD00144D187AC1022ECA6B957259273E442B3960E52DB25005CABD155C339D94DF067259B23790172265097856682C91FF7C2515A82EBE01E1543F2456075575DAC00A77D85F190E5B5BB29DC02558669BDA8249139D0A0D271A46BCF2C8A4E3A874B5A0CCE3473ECA9137F288C7E3D3449614219AA51CFB2C994AC2CC33D9AD79B0A2B205B3A139E2A390D9346226B475D81650682EFA820516C6B2BD46FB74068AF0AB66EB3417BA82E6CA0DF0169591B6A694C96440B5E23C61A6EC3CEEE9E9198C442229BA732533C7F8B71A3740CD02F1F918B8418C143731139AAAE46F97ED73875C048DA2DC41FE176B0A99D9A27D93D618993515CA201303D636B5829BA47FCE9043E1901908044E11B06503D3AB21100C060738396F7E36C496F9EBB1B3E5F7E819EA81196528964BA1A99530887D8EE2D624338A9CB618D56D6650C0E5A05340AA8A1F454A29784242DFD009DCDBBC178DD52B109C09D901110947CE7677770B60E2B4D0522E97AB64D9B265DB73B99C5CEAF15AEBD66C908363710C4E1EC28DCB6F47ADEF7A5448F5142CE21E5629998405C8BCA479895A830AB501EE220FD2C9283E78FFCF68C8FD00BBEFDE837828C93E3F7F41314D0BFD7DFD2F8D7E3AFA2F826485A78E08D4A63D4FEE7979D5EA1BB765721973DBB63B15CDAD4A2FBEFE1C3EF3BE8607DAFE80D6EAEFA3466AA4A093297DF22227C9D70EFBE69AC1159C9EFF089D5DBF42D5D4BDE8F8C9012896837777755B4ECDA55EB870B1F7E0C1838F10CE28D18937C4D526CCBE63DFBE7D2F5555572D63DC32E8D9A29694BAA5AE8FFE81E3C9177153EB366C69F8219697AC861B1E3A2E2143C5652C3D8213E36FE293536F6193FA38DABEB713A6CEF8BBEFBE6B9A86E98884A3E1679E79E64922E8A44EE1FFDF822B04105A97D0F5F5F0A38F3EFAACAFCCE731CDBC79E79DDBE486C646792E348DE1E000A6D4F370B98B50EAF493C925C4F4796452292C355660CD928DA8ADBC0E539353ECD87BC79830482A91D28F1C3972607474F465E24FE166E7E1D5C24B734A3D3A49CCFC0D0D0D0FD1CBA4A3BCA2BC52BCA9D6B6AC355B5AD6CA65A5659225515AB024059A2E68289635B8258F48251E4FC4F9F0C8303B7D7A502D2E72231E8BC7BABABAFE343434F40AF19E138252130A2E5601315A6CB6FD25A982A66DBB77EF7E6CE9D2A51B4D8A5E4595515F57CFAEABADE3153EBFA4392857A919A641374F984FCE4C48972F5F960B15706E2E78F6D5575F79958EBC493C83E2F2B709167FAEF5F1D5F54570372DACDFB469D3BDAB57AFB9CBE572AEA41B5111A23A3495EAFA4242588C6A3595425141A9F2B15C4E1FFBFCF3F3EF1D3F7EFC4DA23F45BC925F0615405F092C3644130FC1CECECE25346C696D6DDDD8D4D4B4CE5DECA6B096CA55552916023246D7124394328114BE3CD4D7D7D74FE7039B376F9EFBF0C30FED4012BCBEDCBE11F89AC3423D719D0921E83545D77591D7ADC88A944847D3348F529FA31EA41EA77EEDFF5C34FDDFF6FF025F4B29688420055AE13B01F4051FD2FC1BDB7F00929F11C14DFD26ED0000000049454E44AE426082";
    private String hex_yellowLight = "89504E470D0A1A0A0000000D494844520000001E0000001E08060000003B30AEA2000000017352474200AECE1CE9000000097048597300000B1300000B1301009A9C180000015969545874584D4C3A636F6D2E61646F62652E786D7000000000003C783A786D706D65746120786D6C6E733A783D2261646F62653A6E733A6D6574612F2220783A786D70746B3D22584D5020436F726520352E342E30223E0A2020203C7264663A52444620786D6C6E733A7264663D22687474703A2F2F7777772E77332E6F72672F313939392F30322F32322D7264662D73796E7461782D6E7323223E0A2020202020203C7264663A4465736372697074696F6E207264663A61626F75743D22220A202020202020202020202020786D6C6E733A746966663D22687474703A2F2F6E732E61646F62652E636F6D2F746966662F312E302F223E0A2020202020202020203C746966663A4F7269656E746174696F6E3E313C2F746966663A4F7269656E746174696F6E3E0A2020202020203C2F7264663A4465736372697074696F6E3E0A2020203C2F7264663A5244463E0A3C2F783A786D706D6574613E0A4CC227590000097549444154480D8D566D7054E5157EDE7BEF7E6477B3C9E6FB03621228A45A4222100A020242B136FC508B4E7FD4B642073B53A7D3613A533FC682FAC3DA71DA3F6D47B4CEF8A3332A606D292856AD1369288625D94DB0A00D04423E36BB9BCD7E64B37BF7EEBD7DDE0D9B66B45ADF9973EFFB75CE73CE79CF39EF2BF039CDB22C5508915FB4BCE2D8B1631B1B1B1B3BBD5EEF724DD3AAB92EF2792392482487272626024F3FFD446F5F5FE04291E7860C9363AB38F7457F21198A1B0E1C38B0E9ECD9B32F5370289FCF73E9F3DBE4E464D4EFF7BF72F0E0C11D457EEE56D817C571F1FFE909092A0D915A569D3A75EAB1F6F6F61FD5D5D53972B91C46AE5CC6952BFF36C7AE8D20198F16CC28F5FAD0B0E42634B72E579A5B96C1E970201289E40707832F6DDF7EC721CA1993E09429AD5EB07C31F062D09BFD7D7D2FDEBA76ED864C2603FFB90F8D333D6F8A81BF3F236647212A9600EE728A21773A0E4C8F028E1A58ABB7FFD4DAB0E55BD69A755FD73C1E3782C181E0238F3CB6F7E4C993E76E1844A679F005602E14CFB4ADBFBFFF584747C7CDC3C3C3C6A9BF1EC1F9F71E51AD24C4AA4D0FE0E6CEADA85BD20CB7C75BF05F7A3685D0F835FC2BF001823D2FC0B053816D07CD3BBBEF3757B6B5D9868686AEEEDBB7EF5E1E97FF33964B50A90A5B4D6F6FEF698E2DBFFF9C7EF0E73FCC3FBC07D6630FB45AEFBCF1B21599B86C199919CB3252A4E40D4A59F96CDC9A0E8D583D275FB17EB1B7D3FAF1BDB01E3FF05DF39F677AB352565F5F5F90B29B250087052C6DCF9E3D454BC1A87D7CCD9A35B70D0683F913479F57F5E859C5C5B8FEE67D4F60FDB63BA1A82A72D9248CECC25149596C02655E37366EBB034EBBC01B87EF8719F78B93477F67B3D9EDB9CECECE55C78F1F7F72F7EEDDDF9389F0DA6BAFA9EA850B17C4A143872CBA637B7777F7AF4DD352DF3EF1AA99990EAAE9ABBDE8BA7D3F36EEEC86220CE8B351A8428762E9105676816066914DCFC03275545657C0C894E072DF5FE0AAAE15A1700AF54B9629E5E5E5AB49033D3D3D17094C79F3112CA8CD830D0D0DF6C1C0F95C7C6A50436606D5766045DB72A86612F9F40434330E919B26453F43362B0E937B8411C7F215AD68F001666A0AB3D317D5407F5FAEAABA1A9B36DDB68FEE71C8089739265B7B4D4DCDAE70388C6BC341C566CD42243F444B2BE0D2D8CF85A1E422FC4700BD4851F649D9F9B1E0BC62708F1E468992447333A0A502B02183B1912175627C1C9595555BEFBBE79EB512B000FCDC73CF6EF49496568D5DBF865C26A2404FC1E7022A99325A7604C84CDE000D17802D822D504191302C024AC54476124AE60A7CA5E42F23427606306262ECFA55ABB4D4EBDEBA63C71609ACC94F55556DA7AAA8988985F30ECD54E6B253F095D950EA75414D0FC04A5541B82B1892262C415DC542164AF6C2BC5C135C3399D84AAA1F1E8F1D15E54E2462A3B06B1D88C722A6D9D4AAF29C3BC8A14A6037EB6E53269B819E49C36E53794ED7E17695C25152094D4419A1FD30953608CD2D61E6818BE016235C12EB8265CCC18A5FA2351370BA96C2E562F287AFC2C66C30F434E6E6E660B3D99AB9D957005614A5223397E1D88483254F4102367B23342AA13A68AD19A3D51701671D7DE48150241BAD96864B2F9806DD390B8B470283916FAFA44973B0DB9DCC006E53B442C5CCCCA5651E7BC9E59612545DD7952C2D56A999E6F4CCCBA4EB856AA39576085B4961CE92C165CE92C3C9F18D9A6319600521609AA24C287656345A2E542AA390A89CC3C123D36CC8EA3A8825D52DB83A9B4AA512BA9EE3C8CE02504EA046E8790A541C85399A404B1DD4DC4661D455B216EE11FEE72D82C56390790C2AA16AAC3A04CD197435B797965759BA70405E3474B7D45097513D47DC495DCF82B503AED24A38CB5621991A471E76E2D1F504964AD01D245AAF31E4E5794BB2C97E0995E59A42EF90248F49A0547A1436EF0678CAAA19949AB416F1787C9C98C902F0F8F8E4C56432490DF38ACDE945C5D24E4498A2999C0D96CB0EA554BA565A2BC1697991D4F9BE9C83A057488A9B7BDD7664F37684C3162A97AE87C3E543369B17E9749A73E14B044E15F2F8F4E9D3FEE9E9E994AE1B22C3B2DEB4622D52F4D6D4540C39D505A58201C5F49877332D5617592BFB8256F30804434654BA613026C2D159C4E8D4A6B6F5C8992CB07A4E8946234620103847E07C0198AF86C0D4D4549F4C8AC950D4ACA86D46DBA62711E80F22CA7882CD07A5B29687C5EDAC64A69521193019CDB20F35057804416BA1387D884D6B08FAFD6859FF33D4347E05131351F9B040343A3DF0D65B6F49E0F902C2FF38EFCBD77D3EDF3655115A686A26DFB5E56EF5FA950BF8E06FAFA266E94FE06B6A4596D1896C82158AE965E465E6425118698C64D8CBE0B0679018FF04BDEF1D8159B313B7EDFC0E26C349736232A4C9A8EEEF0FFC89582324A8CCABC2EDC44B3FB262E5CAAF36D4D72D1B1DBD662EBD6999E8E8DA260686E298B8F4029A5A56C35DDBC534DE04C5D345EA805A7A2B54EF7AD83CB7F09805662707F1F6B15F6234D18DFB1E7A86C1E9B07A7A4E9B0E6789323C7CB9F7A597FEF02B628624A64C8C62936EEF7EF4D1477F5B5F57BBC432F3B9BBEEBA4BF37A5DE21FEFFC19B9C987B16EF3F7D1B8E201D8CADA79AEB20E48F604728920263FF923FC1FBC885CD9B3D8B2EBDBC8E8A675E2C409C330F2B64834167DEAA9A71EE6E6232426F73C67F12F8FD8535D5DFDE0FEFDFB9FAEF095971A866EECD8F90DA5A5A5598986C611BB7E96374F006EAF13F6129E3981737321A41229CC19AB50B66403AAEB9762ECFA98C987A249CBB44472367BF4E8D1431F7DF4D1EFC9C01BA3A0ADB5D862F9D863A117554DCDCD3FB87FCF9E0395951535B3A90456AFEE3056B5AF56CACA7CBC497342C8C20056ABC2293B60A9BC8A54BB9548C4AD0B4383E6F9F37ECDE5F22036139F39F1E69BBF190A069FA7EC10659347969CFF5A2CFB8556F0BF10951CECDEBB77EF43F5F5F55DF43A3496D3A6E69BCC86C626ABDC5725F8A6E116017A05F199A83531362AAE8E8C285956278D1530149A1A387CF8F9C3DCF43A654E158A750161FEB3D8E285E91BE04C50746EDEBCF9EE5B6EF9DA2EA7D3B19201CCA0B758FC6D2C8BF3B5DACCE7591C724C2B41538499C964873FFEF8D2DBEFBEFBEEEBE497CFDAE4A74125D0FF04960BB2C987E0912347AAD96D5FB76E5D576B6B6B87CBED6E61C656689AEA920A9AA6996692C632E9F4085BF0CC993367B93FB075EBD6D0FBEFBF5F082429EBD3ED0B81176D96E6C930964AC8A8AA28717BDD0A9F7EB3B3315E57889142A429129FF8CCA4FFD3BE2CF0623192472A52E495C122810A41C3FF976AFF0127EF917C46872B600000000049454E44AE426082";
    private String png_upload = "89504E470D0A1A0A0000000D4948445200000080000000800806000000C33E61CB00000CE34944415478DAED9D7F8C14571DC0BFBB7BB7F7BBC0C1F1A377578F2AB9036B3DB497406D2DC43605295A4DB5627A1588942850AE692DFE8136044CAA29A9A6E91FB6359C29FD955A41C182A1452A228DC580F66CEF80C25D0A395289E01DBF0A77B77EBFBB6F706F77767766DE7BF3E6CDBE4FF2327B7BB3B36FF67DE6BD793F27022163FBCE99D5B86961A119430386260C933154B3BFF37102C3390CA730F4B2BF7B307453B86BDEC173AACF512411D511E00513BC1537B7619885E1260C9F92FC9547311CC0F03686B7508843AA7F031EB41300137C026EE66158C0B6631547E92C869D18FE405B14E2B4E2F8B8420B0158B6FE2D0CF7629883A144759C723084610F865730BCAC437111680130E1295B5F0EA9C42F571D1F975CC2F032865FA2086FAB8E4C2E022700263A5DDD94E00F6368551D1F41D07DC24648E50A43AA23934E6004C084A72B9CAEF60E48DDB587915E0C3F8754AE7049756408E502B02BFE3E0C8F4178133E935E0CEB306C569D2328150013FF16DC3C05E1C9EADD4245C32A94E02FAA22A0440056957B125257BE0173020C0FA9A842FA2E0026FE624825BEEAFA7BD0A0F60492A0D3CF2FF54D0076D53F8BE16E3F4F5043B66258E6576EE08B0098F8B7E36613146E8737A4A0FE872528C11BB2BF48BA0098F86B70B30182DB7A1754A876B01625F8A9CC2F9126006BBEA5ABFE1E99275004506BE23259CDCA5204C0C4A7AED76D90EA9D33F043BD8F0B518253A20F2C5C004C7CEA87DF01C5D3A8E317BD18E6A304DD220F2A540096F87F82D4E00B83782807982B52026102B0563DBAF2AB15FC30C504DD0BCC17D57A28440076E5BF0326F1FD822468139113700B60B27D6508290EB8046077FBFBC1DCF0A9A217C36C9EDA816701583D9FAE7C53D5530B5511E77A6D27E011E025488DDC31A887461A2DF2F2414F02B0E6DDC7559FB561143FF4D26CEC5A00D6B143D53DD3B61F2CA8EF60BEDB0E245702B02EDD83607AF5820AF522CE74D395EC56802D60FAF383CE5614E06B4E77762C001BC9B349F5D9191CB1C4E9C8224702B0ACFF08846C185765652394C5C7C399B35A4FEFB38386974D7352143815E07908D900CE192D8FC0D44F7C3BF9FA78DF8BF05EF713AAA3241A1A72DE5E68A78202B04E9EBDAACF4624E9896F1152096E2DD4699457003669833A7942336EDF2EF12D422801956D6DF9269F1412603184E8C62F5FE25B845082BC378439056073F5DE879074F438497C8B63C75F80F70F6F541D6551F462989E6B2E623E0156436A22A3F6B8497C8BC3475F80231F8446820E14E01776FFB0158095FDC721042D7E5E12DF224412F442AA5A98752F904B00AAF23DAF3AD6BCF024BE054970F8E8131089289F48CD4B3B0AB039F3CD5C02507BBFD677FE2212DFA2E7F06638726CA3EE121C42016666BE9975466C5996FDAA63CB83C8C4B7088904B33397ABB11380AA7D8B55C7D42B3212DF22041274A2004BD2DF1875266C98D7BF41BF059992C84C7C0BCD25A0AA605DFAF0B14C01BE0BA929DCDAE147E25B682E01CD337CCEFA2353805DB8B95D750CDDE267E25B682CC11B28C01DD61F5763CFBA7CFB41B3A15E2A12DF425309A82D608AD5559C2E8076757F95896FA1A90457DB04D205D06A98F7F4E60EB8BEE97ED5D148A2A104578791A70B7006341AF173C7DCDD108F0727BADB5E6FC75FB30BA2512D24388B028CA317C9D8B225D70FAA8E951B3E7BC3BA517F97958D87BA0937FBF2DD7D7D7BE1FC85D350521287CACA3A181919823FEE7A14B7FF816BEBCB749180460F1FB204D0BEE76F7CEDE761569B3F35D8D7B6DC0F274EFECDF67FE5E5515D2448F6105A026855FEDB111401084D2448DE075802D0885FD94FDA904A9004203490E0280A302DC29A7F0755C78697A009406820410D0940D3BBDF511D135E822800117009DA223A3600D911540188004BD04E02ACC7176B55C78497200B400454820D11DDFBFF2D822E0041124CB9B60C62B1C048D04902D0322F7354C784171D04204A4B2350DF500E25258190600F094063FF5B54C784175D04200224413709F0218460F8B74E02100191E004099050190351E826001104098C001E102500A15A02238007440A40A894C008E001D10210AA24300278408600840A098C001E902500E1B70446000FC81480A0C4A766E3783C2AFD5C8C001E902D0041CDC5F50DF225300D411EF04300C207094E98A6600FF825002159826ED319E4013F0520244AB0C7B7EEE058AC02A6373F04D5554D39F7B97CF92CFCB3EB577065A8DBF5240B1D049838F106B8E973CBA0A2625CCE7DCE9C39067BF7FD0CAE5CB990F1FB4991A0D3B70121377EFA47D0D850780D631A6FBF75DB9D3076ACBB7BD3A00B108BC561C977764355E58482FB76BDF71B7873F75A9B63089760836F43C266B53D8389E4ECE9329B7EFD25A8AC3E0DD5D531C7C70FBA00D7D4D4A3006F3ADA978E4DDF61876009DA7D1B14EA5680C17327A1A1B11CCACA9C9D68B108400894A0CDB761E16E0518183C996C156BBCAEDCD138BA6212802009A8B1C8E90592831ADF2686781180A8AA8A25C7D115A2D80420E83E9924A8A8705E54A6919A1842AFFC981AE65500A2767C29D4D696E6FD4C310A407048306A6A98F4C9A13C0210940B506E908B621580F028C1A8C9A1D2A787F30A10C5736BC49BC2D252FB32AF9805203C48F0FFE9E184EC0522780520E8AEB7F1BA32DB46A26217807021C1E8052208D9F7012204206AAE89C1A449D93785D4D238A3790DD618E43EC37A60E024ECF9F3FAAC96BA42F82100E15002DB2562A4360889128098501787B163ED1733EBEFFF18CE9F1B96751A9EF14B00A290048944A27DE1FC43598B44495D264EA400444363199497679FE0F07002FAFA2EC248C01CF05300228F0443F81B4DF9EA8243A3978923642E14295A006A08A14622BBA153E70687E0D4A9CB324EC3337E0B40E490C07EA14842E652B1A20520CA2BA2505F6F7F5318B4A240850004FD349326C5A1BA2695B15FBE3CB2ECEB5FF947CEA562A52D162D430062CC9812A89B18CF7A3F6845812A012C264F4E4A70697070A86ED137DEB55F2C9A90353EC08D00D41F7EE9E219C7C71E575B9AEC37C8E4C2859164711004CA2BC6C1AD5F78D4D1BE3204203027E85CF4CD77732F174FC87A60841B018A1D590294C6235F5CB1BC7BD443407D7B648C11C0393204C07B81AED52B7B3E93F5BEDDCE32DA048C00CE9124C01214A033EB7DBB9DD963E3A88BB84954048C00CE112D0026FE090C531F5CD1E3ECB17184E81E42238073440B108DC20F30F16D9F87EBDBA3638D00CE11DC0ED08B9B1998FD5FB4FD7FBE0F8B7C78B411C039220588C560D9AAEFF73C97EBFFBE3D3EDE08E01C814DC15D1866DA95FD57F729741094E016DCEC2DB45F218C00CE1128C05CCCFAF7E4DDC7C9815002AA12DEC713994F36AD8496E6A5027FA6F072E0EFCFC2BEFD7C0FADC6ACFF15CCFA0B8EEF702A00751553B5D0F388A1F3E701C68DB9136A6AEA05FF5CE182069C74F7FC1E1209AE4E8C01BCFAA7E1D5FF51A11D1D4FC013714318C46EDA308257FF0378F53BEAD57535031325D8829BBB79226724900BD6F9B7E34DDF42A7FBBB15808A02EA27E05A50C248208D7ECCFA5B9D64FD16AE5722420968C4D00EE01C3A662410CE3066FD7761D6BFD3CD873C2D458512ACC1CDE3BC313612882312851FAF5ED1B3DEF5E7BC7EA1A861E446027EB0DC7F0DCBFD7BBC7C9647001A3E46CBCB70B7EE1809BC83653EDD93CDC1727FC0D3E779BE1C25A05918347AA889F7448C049EF81005988D89EF6C00A50DDCCB51A204B4C218E504DC53728C04AEA0C1BB733B56F5FC8BE72042D623651250A75135EFB18C048EA0ECFE66DEC427842D48CB3A8DA87A682490CB859292C897577EAFFB2D110713BA22B1290EA42324DB4F47F892D44C02CA099A788F652418052DE93B5F64E21352D62467B5836D60AA88426055BD853C77FB398F2D2BD2AC9D807AA44C631107D4C89348C052AFF5FC42487F2A016B36DE00A6EFC02DC39128ACF3D2BCEB065F1E4BC13A90682C81E94574467F2C064BDD76EC78C1B787D3B0AE642A12CC78823C6096FF3BCCF21F70D3A5CB83EFCF2963238B9E048EE16521956000AFFA479C8EE4118592A715B2DC8024F03CD0344C12D000CE911178D0AFAB3E1DA50FAE65AD874F81C77907BA4B40E3F671B3AAD0D06DA97150FD23B0C92794133C061E1A8F749480A66B6159FF132CEB3BF34DDAF0252EAA7F0C0B36177139860E7029822E1250C263781A13FEE95C73F57C8F93EA0864C272046A3C7A185C140D41968065F51B71BB59F5159F1537D511C8075BAE86720512A2E0C2550193E063BCB97B752401CFAC5ED1C33DB54E168116C082352B9304F742EA0967395B15154B40AD77FB20012FE2EB976435DF8A440B01D26155C8791816B06D567B82CF120CE00DDD2E2CD7B7E3EBD75554E578D04E804CB6ED686DC51FFFB6683442C505F53E269F7C224B022CC7FB301CC07AFB5FF16ADF8BD9BBF4E72DC9447B013279F5B73756E359B56002B55CBA38DCFCDF81A1A98911B81EFF351145A982C283554E61029FC7ED47B83D86DB5EFCDC0778CC1ECCDABB74C8D6DDF03FB80B08F956E873840000000049454E44AE426082";

    String[] workflows = {"", "elsa Video 720p", "elsa Video", "Maschinenbau HD", "Maschinenbau", "OhneVorUndAbspan"};
    private JComboBox<String> cb_workflows = new JComboBox<String>(workflows);

    private JButton b_connect = new JButton("Connect");
    private JButton b_fileChooser = new JButton("Datei Auswählen");
    private JButton b_upload = new JButton("Upload");
    private JButton b_test = new JButton("Test");

    private JLabel lb_dozent = new JLabel("Dozent:");
    private JLabel lb_titel = new JLabel("Titel:");
    private JLabel lb_beschreibung = new JLabel("Beschreibung:");
    private JLabel lb_datei = new JLabel("");
    private JLabel lb_workflows = new JLabel("Workflow:");
    private JLabel lb_datum = new JLabel(" ");
    private JLabel lb_username = new JLabel("User:");
    private JLabel lb_connectIndicator = new JLabel(new ImageIcon(DatatypeConverter.parseHexBinary(this.hex_redLight)));
    private JLabel lb_uploadStatus = new JLabel(" ");
    private JLabel lb_loginStatus = new JLabel(" ", JLabel.RIGHT);
    private JLabel lb_test = new JLabel("DDDDDDD");

    private JTextField tf_dozent = new JTextField();
    private JTextField tf_titel = new JTextField();
    private JTextField tf_beschreibung = new JTextField();

    private JProgressBar pb_progress = new JProgressBar();

    private JPanel connectIndicator1 = new JPanel();
    private JPanel connectIndicator2 = new JPanel();
    private JPanel connectIndicator3 = new JPanel();
    private JPanel connectIndicator4 = new JPanel();
    private JPanel connectIndicator5 = new JPanel();
    
    

    private File movie;
    private boolean upload;
    private boolean logedIn;

    public Window() {
        this.window = new JFrame("Flowcast Media Uploader");
        this.window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.window.setMinimumSize(new Dimension(400, 310));
        this.window.setLocation(300, 150);
        this.window.setLayout(new BorderLayout());
        this.window.setResizable(false);

        this.server = new Server(this);
        this.settings = new Settings(window);
        this.ftp = new Ftp(this);

        this.pb_progress.setStringPainted(true);
        this.lb_datei.setVerticalAlignment(JLabel.CENTER);
        this.lb_dozent.setVerticalAlignment(JLabel.TOP);
        this.lb_titel.setVerticalAlignment(JLabel.TOP);
        this.lb_uploadStatus.setVerticalAlignment(JLabel.BOTTOM);
        this.pb_progress.setValue(0);
        this.calendar = Calendar.getInstance();
        //this.lb_datum.setText(String.valueOf(this.calendar.get(Calendar.DAY_OF_MONTH) + "." + (this.calendar.get(Calendar.MONTH)+1) + "." + this.calendar.get(Calendar.YEAR)));
        this.upload = false;
        try {
            this.window.setIconImage(ImageIO.read(new ByteArrayInputStream(DatatypeConverter.parseHexBinary(this.png_upload))));
        } catch (IOException ex) {

        }
        this.testConnection();
        this.time();
        
        if("Mac OS X".equals(System.getProperty("os.name"))){
            this.cb_workflows.setFont(new Font("Helvetica", Font.PLAIN, 13));
            this.b_connect.setFont(new Font("Helvetica", Font.PLAIN, 13));
            this.b_fileChooser.setFont(new Font("Helvetica", Font.PLAIN, 13));
            this.b_upload.setFont(new Font("Helvetica", Font.PLAIN, 13));

            this.tf_beschreibung.setFont(new Font("Helvetica", Font.PLAIN, 15));
            this.tf_dozent.setFont(new Font("Helvetica", Font.PLAIN, 15));
            this.tf_titel.setFont(new Font("Helvetica", Font.PLAIN, 15));

            this.lb_datum.setFont(new Font("Helvetica", Font.PLAIN, 13));
            this.lb_dozent.setFont(new Font("Helvetica", Font.PLAIN, 14));
            this.lb_titel.setFont(new Font("Helvetica", Font.PLAIN, 14));
            this.lb_beschreibung.setFont(new Font("Helvetica", Font.PLAIN, 15));
            this.lb_workflows.setFont(new Font("Helvetica", Font.PLAIN, 14));
            this.lb_uploadStatus.setFont(new Font("Helvetica", Font.PLAIN, 11));
            this.lb_loginStatus.setFont(new Font("Helvetica", Font.PLAIN, 11));
        }
        else {
            this.lb_datum.setFont(new Font(this.lb_datum.getFont().getName(), Font.PLAIN, 13));
            this.lb_username.setFont(new Font(this.lb_datum.getFont().getName(), Font.PLAIN, 15));
            this.lb_dozent.setFont(new Font(this.lb_dozent.getFont().getName(), Font.PLAIN, 14));
            this.lb_titel.setFont(new Font(this.lb_titel.getFont().getName(), Font.PLAIN, 14));
            this.lb_beschreibung.setFont(new Font(this.lb_beschreibung.getFont().getName(), Font.PLAIN, 15));
            this.lb_workflows.setFont(new Font(this.lb_workflows.getFont().getName(), Font.PLAIN, 14));
            this.lb_uploadStatus.setFont(new Font(this.lb_uploadStatus.getFont().getName(), Font.PLAIN, 11));
            this.lb_loginStatus.setFont(new Font(this.lb_loginStatus.getFont().getName(), Font.PLAIN, 11));
        }
        
        

        this.b_upload.setEnabled(this.enableUpload());

        JPanel panel = new JPanel();
        SpringLayout springPanel = new SpringLayout();
        panel.setLayout(springPanel);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_connectIndicator, 10, SpringLayout.NORTH, panel);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_connectIndicator, -10, SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_connectIndicator, 30, SpringLayout.NORTH, this.lb_connectIndicator);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_connectIndicator, -30, SpringLayout.EAST, this.lb_connectIndicator);
        panel.add(this.lb_connectIndicator);

        springPanel.putConstraint(SpringLayout.NORTH, this.b_connect, 13, SpringLayout.NORTH , panel);
        springPanel.putConstraint(SpringLayout.EAST, this.b_connect, -5, SpringLayout.WEST , this.lb_connectIndicator);
        springPanel.putConstraint(SpringLayout.SOUTH, this.b_connect, 24, SpringLayout.NORTH , this.b_connect);
        springPanel.putConstraint(SpringLayout.WEST, this.b_connect, -100, SpringLayout.EAST , this.b_connect);
        panel.add(this.b_connect);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_datum, 14, SpringLayout.NORTH , panel);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_datum, 10, SpringLayout.WEST , panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_datum, 18, SpringLayout.NORTH , this.lb_datum);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_datum, -5, SpringLayout.WEST , this.b_connect);
        panel.add(this.lb_datum);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_loginStatus, 2, SpringLayout.SOUTH, this.lb_connectIndicator);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_loginStatus, 0, SpringLayout.EAST, this.lb_connectIndicator);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_loginStatus, -300, SpringLayout.EAST, this.lb_connectIndicator);
        panel.add(this.lb_loginStatus);

        springPanel.putConstraint(SpringLayout.NORTH, this.b_fileChooser, 30, SpringLayout.SOUTH, this.lb_datum);
        springPanel.putConstraint(SpringLayout.EAST, this.b_fileChooser, 150, SpringLayout.WEST, this.b_fileChooser);
        springPanel.putConstraint(SpringLayout.WEST, this.b_fileChooser, 10, SpringLayout.WEST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.b_fileChooser, 24, SpringLayout.NORTH, this.b_fileChooser);
        panel.add(this.b_fileChooser);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_datei, 0, SpringLayout.NORTH, this.b_fileChooser);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_datei, -9, SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_datei, 5, SpringLayout.EAST, this.b_fileChooser);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_datei, 20, SpringLayout.NORTH, this.lb_datei);
        panel.add(this.lb_datei);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_dozent, 4, SpringLayout.SOUTH , this.b_fileChooser);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_dozent, 0, SpringLayout.WEST , this.b_fileChooser);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_dozent, 60, SpringLayout.WEST , this.lb_dozent);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_dozent, 20, SpringLayout.NORTH , this.lb_dozent);
        panel.add(this.lb_dozent);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_titel, 3, SpringLayout.SOUTH , this.lb_dozent);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_titel, 0, SpringLayout.WEST , this.lb_dozent);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_titel, 60, SpringLayout.WEST , this.lb_titel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_titel, 20, SpringLayout.NORTH , this.lb_titel);
        panel.add(this.lb_titel);

        springPanel.putConstraint(SpringLayout.SOUTH, this.tf_dozent, -1, SpringLayout.SOUTH , this.lb_dozent);
        springPanel.putConstraint(SpringLayout.WEST, this.tf_dozent, 0, SpringLayout.EAST , this.lb_dozent);
        springPanel.putConstraint(SpringLayout.EAST, this.tf_dozent, -10, SpringLayout.EAST , panel);
        panel.add(this.tf_dozent);

        springPanel.putConstraint(SpringLayout.SOUTH, this.tf_titel, -1, SpringLayout.SOUTH , this.lb_titel);
        springPanel.putConstraint(SpringLayout.WEST, this.tf_titel, 0, SpringLayout.EAST , this.lb_titel);
        springPanel.putConstraint(SpringLayout.EAST, this.tf_titel, -10, SpringLayout.EAST , panel);
        panel.add(this.tf_titel);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_beschreibung, 5, SpringLayout.SOUTH, this.lb_titel);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_beschreibung, 0, SpringLayout.WEST, this.lb_dozent);
        panel.add(this.lb_beschreibung);

        springPanel.putConstraint(SpringLayout.NORTH, this.tf_beschreibung, 2, SpringLayout.SOUTH, this.lb_beschreibung);
        springPanel.putConstraint(SpringLayout.WEST, this.tf_beschreibung, 0, SpringLayout.WEST, this.lb_beschreibung);
        springPanel.putConstraint(SpringLayout.EAST, this.tf_beschreibung, -10, SpringLayout.EAST, panel);
        panel.add(this.tf_beschreibung);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_workflows, 5, SpringLayout.SOUTH, this.tf_beschreibung);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_workflows, 0, SpringLayout.WEST, this.lb_beschreibung);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_workflows, 70, SpringLayout.WEST, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_workflows, 20, SpringLayout.NORTH, this.lb_workflows);
        panel.add(this.lb_workflows);

        springPanel.putConstraint(SpringLayout.NORTH, this.cb_workflows, -1, SpringLayout.NORTH, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.WEST, this.cb_workflows, 0, SpringLayout.EAST, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.EAST, this.cb_workflows, -10, SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.cb_workflows, 23, SpringLayout.NORTH, this.cb_workflows);
        panel.add(this.cb_workflows);

        springPanel.putConstraint(SpringLayout.NORTH, this.lb_uploadStatus, 10, SpringLayout.SOUTH, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.WEST, this.lb_uploadStatus, 1, SpringLayout.WEST, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.EAST, this.lb_uploadStatus, -10, SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.lb_uploadStatus, 12, SpringLayout.NORTH, this.lb_uploadStatus);
        panel.add(this.lb_uploadStatus);

        springPanel.putConstraint(SpringLayout.NORTH, this.pb_progress, 2, SpringLayout.SOUTH, this.lb_uploadStatus);
        springPanel.putConstraint(SpringLayout.WEST, this.pb_progress, 0, SpringLayout.WEST, this.lb_workflows);
        springPanel.putConstraint(SpringLayout.EAST, this.pb_progress, -10, SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.pb_progress, 20, SpringLayout.NORTH, this.pb_progress);
        panel.add(this.pb_progress);

        springPanel.putConstraint(SpringLayout.NORTH, this.b_upload, 5, SpringLayout.SOUTH, this.pb_progress);
        springPanel.putConstraint(SpringLayout.WEST, this.b_upload, ((window.getWidth() - 120) / 2), SpringLayout.WEST, panel);
        springPanel.putConstraint(SpringLayout.EAST, this.b_upload, -((window.getWidth() - 120) / 2), SpringLayout.EAST, panel);
        springPanel.putConstraint(SpringLayout.SOUTH, this.b_upload, 24, SpringLayout.NORTH, this.b_upload);
        panel.add(this.b_upload);

        springPanel.putConstraint(SpringLayout.EAST, this.b_test, -5, SpringLayout.WEST, this.b_upload);
        springPanel.putConstraint(SpringLayout.NORTH, this.b_test, 0, SpringLayout.NORTH, this.b_upload);
        //panel.add(this.b_test);

        window.add(panel, BorderLayout.CENTER);

        this.b_fileChooser.addActionListener(this);
        this.b_connect.addActionListener(this);
        this.b_upload.addActionListener(this);
        this.b_test.addActionListener(this);
        this.cb_workflows.addActionListener(this);

        this.tf_dozent.getDocument().addDocumentListener(this);
        this.tf_titel.getDocument().addDocumentListener(this);
        this.tf_beschreibung.getDocument().addDocumentListener(this);

        window.setVisible(true);
    }

    public void time() {
        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    calendar = Calendar.getInstance();
                    String[] monat = {"Januar", "Februar", "März", "April", "Mai", "Juni", "Juli", "August", "September", "Oktober", "November", "Dezember"};
                    DecimalFormat f = new DecimalFormat("00");
                    String tag = f.format(calendar.get(Calendar.DAY_OF_MONTH));
                    String jahr = String.valueOf(calendar.get(Calendar.YEAR));
                    String stunde = f.format(calendar.get(Calendar.HOUR_OF_DAY));
                    String minute = f.format(calendar.get(Calendar.MINUTE));

                    lb_datum.setText(tag + ". " + monat[calendar.get(Calendar.MONTH)] + " " + jahr + " " + stunde + ":" + minute);

                    try {
                        int sleep = (60 - calendar.get(Calendar.SECOND)) * 1000;
                        Thread.sleep(sleep);
                    } catch (InterruptedException ex) {
                        System.err.println(ex.getMessage());
                    }
                }
            }
        }).start();
    }

    public void testConnection() {
        
        new Thread(new Runnable() {
            @Override
            public void run() {
                while (true) {
                    if (logedIn && !upload && !ftp.testConnection()) {
                        logedIn = false;
                        lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(hex_redLight)));
                        b_connect.setText("Connect");
                        b_upload.setEnabled(false);
                    }

                    try {
                        Thread.sleep(2000);
                    } catch (InterruptedException ex) {
                        System.err.println(ex.getMessage());
                    }
                }
            }
        }).start();
    }

    public boolean enableUpload() {
        boolean datei = this.lb_datei.getText().length() > 0;
        boolean dozent = this.tf_dozent.getText().length() > 0;
        boolean titel = this.tf_titel.getText().length() > 0;
        boolean beschreibung = this.tf_beschreibung.getText().length() > 0;
        boolean workflow = this.cb_workflows.getSelectedItem().toString().length() > 0;

        return this.ftp.connected() && datei && dozent && titel && beschreibung && workflow && !this.upload;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

        Object o = e.getSource();

        if (o == Window.this.b_connect) {

            new Thread(new Runnable() {

                public void run() {

                    if (Window.this.logedIn) {
                        if (Window.this.ftp.logOut()) {
                            Window.this.logedIn = false;
                            Window.this.lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(Window.this.hex_redLight)));
                            Window.this.b_connect.setText("Connect");
                            Window.this.lb_loginStatus.setText("Disconnected");
                            Window.this.b_upload.setEnabled(enableUpload());
                        }
                    } else {
                        try {
                            Window.this.settings.setLocation((int) (Window.this.window.getLocation().getX() + ((Window.this.window.getSize().width - settings.getSize().width) / 2)), (int) (Window.this.window.getLocation().getY() + 72));
                            Window.this.settings.setVisible(true);
                            char[] pass = Window.this.settings.getPassword();
                            if (pass == null) {
                                return;
                            }

                            Window.this.server.key(pass);
                            Arrays.fill(pass, '0');

                            Window.this.lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(Window.this.hex_yellowLight)));
                            Window.this.b_connect.setEnabled(false);
                            Window.this.lb_loginStatus.setText("Connecting ...");

                            if (Window.this.ftp.logIn(Window.this.server)) {
                                Window.this.logedIn = true;
                                Window.this.lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(Window.this.hex_greenLight)));
                                Window.this.b_connect.setEnabled(true);
                                Window.this.b_connect.setText("Disconnect");
                                Window.this.b_upload.setEnabled(enableUpload());
                            } else {
                                Window.this.lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(Window.this.hex_redLight)));
                                Window.this.b_connect.setEnabled(true);
                                Window.this.lb_loginStatus.setText("Connecting failed");
                            }

                        } catch (Exception ex) {
                            Window.this.lb_connectIndicator.setIcon(new ImageIcon(DatatypeConverter.parseHexBinary(Window.this.hex_redLight)));
                            Window.this.b_connect.setEnabled(true);
                            Window.this.lb_loginStatus.setText(ex.getMessage());
                            System.err.println(ex.getMessage());
                        }
                    }
                    Window.this.b_upload.setEnabled(enableUpload());

                }

            }).start();

        } else if (o == Window.this.b_fileChooser) {
            String pfad = null;
            System.out.println(System.getProperty("user.home"));
            if ("Mac OS X".equals(System.getProperty("os.name"))) {
                pfad = System.getProperty("user.home") + "/Movies/";
            } else if (System.getProperty("os.name").startsWith("Windows")) {
                pfad = "C:\\Users\\" + System.getProperty("user.name") + "\\Videos";
            }
            JFileChooser chooser = new JFileChooser(pfad);
            FileFilter filter = new FileNameExtensionFilter("Videodatei", "mp4", "mov", "m4v");
            chooser.setFileFilter(filter);
            chooser.setMultiSelectionEnabled(false);
            int open = chooser.showOpenDialog(null);
            if (open == JFileChooser.APPROVE_OPTION) {
                Window.this.movie = chooser.getSelectedFile();
                Window.this.lb_datei.setText(Window.this.movie.getName());
                Window.this.b_upload.setEnabled(Window.this.enableUpload());
                Window.this.lb_uploadStatus.setText(" ");
                Window.this.pb_progress.setValue(0);
            }
            chooser = null;
        } else if (o == Window.this.b_upload) {

            new Thread(new Runnable() {

                public void run() {

                    if (Window.this.ftp.connected()) {
                        Window.this.b_connect.setEnabled(false);
                        Window.this.b_upload.setEnabled(false);
                        Window.this.b_fileChooser.setEnabled(false);
                        Window.this.upload = true;
                        Window.this.ftp.upload(Window.this.movie, Window.this.tf_dozent.getText(), Window.this.tf_titel.getText(), Window.this.tf_beschreibung.getText(), Window.this.cb_workflows.getSelectedItem().toString());
                    } else {
                        Window.this.lb_uploadStatus.setText("Connection lost!");
                        Window.this.b_upload.setEnabled(Window.this.enableUpload());
                    }
                }

            }).start();

        } else if (o == Window.this.cb_workflows) {
            Window.this.b_upload.setEnabled(Window.this.enableUpload());
        } else if (o == Window.this.b_test) {
            String key = "";
            try {
                Window.this.server.key(key.toCharArray());
            } catch (Exception ex) {
                Logger.getLogger(Window.class.getName()).log(Level.SEVERE, null, ex);
            }
            String temp = "...";
            System.out.println(Window.this.server.encrypt(temp));
        }

    }

    @Override
    public void insertUpdate(DocumentEvent e) {
        this.b_upload.setEnabled(this.enableUpload());
    }

    @Override
    public void removeUpdate(DocumentEvent e) {
        this.b_upload.setEnabled(this.enableUpload());
    }

    @Override
    public void changedUpdate(DocumentEvent e) {

    }

    public JButton getBUpload() {
        return this.b_upload;
    }

    public JButton getBConnect() {
        return this.b_connect;
    }

    public JButton getBFileChooser() {
        return this.b_fileChooser;
    }

    public JProgressBar getPBProgress() {
        return this.pb_progress;
    }

    public void setLBUploadStatus(String text) {
        this.lb_uploadStatus.setText(text);
    }

    public void setLBLoginStatus(String text) {
        this.lb_loginStatus.setText(text);
    }

    public void setUpload(boolean bo) {
        this.upload = bo;
    }

    public JLabel getLBIndicator() {
        return this.lb_connectIndicator;
    }

}
